# Распределение наследства

Форма позволяет создать Merkle tree для распределения токенов и нативного ETH между наследниками и записать root и список токенов в хранилище на контракте.

## Токены

1. Отметьте галочку **ETH**, если нужно включить нативный Ethereum в расчёт долей (в контракт передаётся адрес-заполнитель для ETH; на страницах управления и получения наследства ETH отображается отдельно с нативным балансом).
2. Нажмите **«+ Добавить токен»** и введите адреса ERC-20 токенов (формат `0x...`).
3. Балансы отображаются автоматически при подключённом кошельке; числа выводятся с разделителями тысяч (например, 100 000 000).

## Режим «Доли в файлах»

Над списком токенов есть переключатель «Скрыть доли» / «Раскрыть доли» (сейчас он отключён в интерфейсе). Активен только режим **«Раскрыть доли»**: в файлах наследников сохраняются полные доли по каждому токену (sharesBps). Режим «Скрыть доли» планируется в будущем.

## Наследники

1. Введите **ID наследника** — целое число (1, 2, 3...)
2. Укажите **имя** (опционально)
3. Заполните **доли в %** по каждому токену
4. Сумма долей по каждому токену не должна превышать 100%

## Результат

После нажатия "Обновить хранилище" или "Создать новое хранилище":

- Скачиваются файлы: **merkleTree.json** (root, токены, массив листьев, полный массив наследников) и по файлу на каждого наследника (**heir\_\<id\>\_\<имя\>.json**) с полями **owner** (адрес наследодателя — ваш подключённый кошелёк), heirId, name, sharesBps, leaf, proof. Файл наследника нужен для вызова контракта при получении наследства (claimWithProof); адрес vault наследник получит через фабрику по owner.
- Инициируется **транзакция**: создаётся новое хранилище (если его ещё нет) или обновляется существующее — в контракт передаются root и список токенов (включая адрес для ETH, если галочка ETH отмечена). Подтвердите транзакцию в кошельке.
- Поле **«Период неактивности (дней)»** используется только при первом создании хранилища (при следующей генерации вызывается уже обновление существующего vault).
